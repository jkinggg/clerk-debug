{"version":3,"file":"migration.d.js","names":[],"sources":["../../../../src/types/plugins/migration.d.ts"],"sourcesContent":["import { DataMigrator } from '../../plugins/migration';\nimport { RxSchema } from '../../rx-schema';\nimport { RxStorageInstance } from '../rx-storage.interface';\nimport {\n    WithAttachments\n} from '../couchdb';\nimport { RxCollection } from '../rx-collection';\nimport { RxDatabase } from '../rx-database';\nimport { MaybePromise } from '../util';\n\nexport type MigrationStrategy<DocData = any> = (\n    oldDocumentData: WithAttachments<DocData>,\n    oldRxCollection: OldRxCollection\n) => MaybePromise<WithAttachments<DocData> | null>;\n\nexport type MigrationStrategies = {\n    [toVersion: number]: MigrationStrategy<any>;\n};\n\nexport interface OldRxCollection {\n    version: number;\n    schema: RxSchema;\n    storageInstance: RxStorageInstance<any, any, any>;\n    dataMigrator: DataMigrator;\n    newestCollection: RxCollection;\n    database: RxDatabase;\n    _migrate?: boolean;\n    _migratePromise?: Promise<any>;\n}\n\n"],"mappings":""}